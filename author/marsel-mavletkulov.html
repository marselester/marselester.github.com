<!DOCTYPE html>
<head>
    <meta charset="utf-8" />
    <!-- Set the viewport width to device width for mobile -->
    <meta name="viewport" content="width=device-width" />

    <title>marselester's blog - Marsel Mavletkulov</title>

    <link rel="stylesheet" href="https://marselester.com/theme/css/normalize.css" />
    <link rel="stylesheet" href="https://marselester.com/theme/css/foundation.min.css" />
    <link rel="stylesheet" href="https://marselester.com/theme/css/style.css" />
    <link rel="stylesheet" href="https://marselester.com/theme/css/pygments.css" />	
    <script src="https://marselester.com/theme/js/custom.modernizr.js"></script>

    <!-- So Firefox can bookmark->"abo this site" -->
        <link href="feeds/all.atom.xml" rel="alternate" title="marselester's blog" type="application/atom+xml">

</head>

<body>

<!-- Nav Bar -->
<nav>
<div class="top-bar">
<div class="row">
    <div class="large-9 large-centered columns">
	    <h1><a href="https://marselester.com">marselester's blog</a></h1>
    </div>
</div>
</div>

<!-- Show menu items and pages -->
<div class="row">
<div class="large-9 columns">
    <ul class="button-group navigation">

            <li><a href="https://marselester.com/pages/about.html" class="button secondary small">About</a></li>
    </ul>
</div>
</div>
</nav>
<!-- End Nav -->


<!-- Main Page Content and Sidebar -->
<div class="row">

    <!-- Main Blog Content -->
    <div class="large-9 columns">
        
        

            <article>
                <a href="https://marselester.com/diy-cpu-profiler-from-bpf-maps-to-pprof.html"><h3 class="article-title">DIY CPU profiler: from BPF maps to pprof</h3></a>
<h6 class="subheader" title="2022-10-20T00:00:00+07:00">Thu 20 October 2022
</h6>


<p><a href="https://marselester.com/continuous-profiling-in-go.html">In previous post</a>
I had a DIY BPF profiler printing stack trace IDs of a given process,
though they were not very helpful.</p>
<div class="highlight"><pre><span></span><code><span class="go">ï¹© sudo go run ./cmd/profiler/ -pid 15958</span>
<span class="go">Waiting for stack traces...</span>
<span class="go">{PID:15958 UserStackID:132 KernelStackID:114} seen 1 times</span>
</code></pre></div>

<p>Let's try to show more useful information this time,
i.e., sampled memory addresses.
You can find the results of my experiments in
<a href="https://github.com/marselester/diy-parca-agent">github.com/marselester/diy-parca-agent</a>.</p>
<h2>Reading addresses from BPF maps</h2>
<p>I continued to explore
<a href="https://github.com/parca-dev/parca-agent/blob/1e935f4d5f7b4484f6cf3d4ee26340f3718ff37d/pkg/profiler/profiler.go#L336">github.com/parca-dev/parca-agent/pkg/profiler/profiler.go</a>
and found the place where stack trace samples are read from the BPF maps â€” <code>profileLoop()</code> method.
Here is its simplified version.</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Always needs to be sync with MAX_STACK_DEPTH in parca-agent.bpf.c.</span><span class="w"></span>
<span class="w">    </span><span class="nx">stackDepth</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">127</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Twice the stack depth because we have a User and a potential Kernel stack.</span><span class="w"></span>
<span class="w">    </span><span class="nx">doubleStackDepth</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">254</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>

<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="w"> </span><span class="o">*</span><span class="nx">CgroupProfiler</span><span class="p">)</span><span class="w"> </span><span class="nx">profileLoop</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">captureTime</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Time</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">it</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">bpfMaps</span><span class="p">.</span><span class="nx">counts</span><span class="p">.</span><span class="nx">Iterator</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">it</span><span class="p">.</span><span class="nx">Next</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Note, pid, userStackID, and kernelStackID are read from it.Key().</span><span class="w"></span>
<span class="w">        </span><span class="nx">stack</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">[</span><span class="nx">doubleStackDepth</span><span class="p">]</span><span class="kt">uint64</span><span class="p">{}</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Collect user-space stack trace samples.</span><span class="w"></span>
<span class="w">        </span><span class="nx">stackBytes</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">bpfMaps</span><span class="p">.</span><span class="nx">stackTraces</span><span class="p">.</span><span class="nx">GetValue</span><span class="p">(</span><span class="w"></span>
<span class="w">            </span><span class="nx">unsafe</span><span class="p">.</span><span class="nx">Pointer</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">userStackID</span><span class="p">),</span><span class="w"></span>
<span class="w">        </span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="nx">binary</span><span class="p">.</span><span class="nx">Read</span><span class="p">(</span><span class="nx">bytes</span><span class="p">.</span><span class="nx">NewBuffer</span><span class="p">(</span><span class="nx">stackBytes</span><span class="p">),</span><span class="w"> </span><span class="nx">byteOrder</span><span class="p">,</span><span class="w"> </span><span class="nx">stack</span><span class="p">[:</span><span class="nx">stackDepth</span><span class="p">])</span><span class="w"></span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">addr</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="nx">stack</span><span class="p">[:</span><span class="nx">stackDepth</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nx">m</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">mapping</span><span class="p">.</span><span class="nx">PIDAddrMapping</span><span class="p">(</span><span class="nx">pid</span><span class="p">,</span><span class="w"> </span><span class="nx">addr</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Collect kernel-space stack trace samples.</span><span class="w"></span>
<span class="w">        </span><span class="nx">stackBytes</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">bpfMaps</span><span class="p">.</span><span class="nx">stackTraces</span><span class="p">.</span><span class="nx">GetValue</span><span class="p">(</span><span class="w"></span>
<span class="w">            </span><span class="nx">unsafe</span><span class="p">.</span><span class="nx">Pointer</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">kernelStackID</span><span class="p">),</span><span class="w"></span>
<span class="w">        </span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="nx">binary</span><span class="p">.</span><span class="nx">Read</span><span class="p">(</span><span class="nx">bytes</span><span class="p">.</span><span class="nx">NewBuffer</span><span class="p">(</span><span class="nx">stackBytes</span><span class="p">),</span><span class="w"> </span><span class="nx">byteOrder</span><span class="p">,</span><span class="w"> </span><span class="nx">stack</span><span class="p">[</span><span class="nx">stackDepth</span><span class="p">:])</span><span class="w"></span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">addr</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="nx">stack</span><span class="p">[</span><span class="nx">stackDepth</span><span class="p">:]</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>From looking at it I can tell that PID, user-space stack ID, and kernel-space stack ID are read
from the <code>counts</code> BPF map on each iteration.</p>
<table>
<thead>
<tr>
<th>{ pid; userStackID; kernelStackID }</th>
<th>seen</th>
</tr>
</thead>
<tbody>
<tr>
<td>{ 10342; 1253; 0234 }</td>
<td>45</td>
</tr>
</tbody>
</table>
<p>A stack ID allows to fetch a stack trace
(an array of memory addresses that represent the code executed during profiling)
from the <code>stack_traces</code> BPF map.</p>
<table>
<thead>
<tr>
<th>stack ID</th>
<th>memory addresses</th>
</tr>
</thead>
<tbody>
<tr>
<td>1253</td>
<td>[ 0xdeadbeef; 0x123abcde; ... ]</td>
</tr>
<tr>
<td>0234</td>
<td>[ 0x597be95a; 0xae5ee03; ... ]</td>
</tr>
</tbody>
</table>
<p>A user-space stack trace indexed by <code>userStackID=1253</code> is placed
in the beginning of the <code>stack [254]uint64</code> array.
The <code>kernelStackID=0234</code> kernel-space stack trace is placed in the middle of the array.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// User-space stack trace is limited by stackDepth=127.</span><span class="w"></span>
<span class="nx">stack</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mh">0xdeadbeef</span><span class="w"></span>
<span class="nx">stack</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mh">0x123abcde</span><span class="w"></span>
<span class="nx">stack</span><span class="p">[</span><span class="mi">126</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="o">...</span><span class="w"></span>

<span class="c1">// Kernel-space stack trace is limited by doubleStackDepth=254.</span><span class="w"></span>
<span class="nx">stack</span><span class="p">[</span><span class="mi">127</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mh">0x597be95a</span><span class="w"></span>
<span class="nx">stack</span><span class="p">[</span><span class="mi">128</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mh">0xae5ee03</span><span class="w"></span>
<span class="nx">stack</span><span class="p">[</span><span class="mi">253</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="o">...</span><span class="w"></span>
</code></pre></div>

<h2>Memory mapping</h2>
<p>Alright, but what does
<code>m, err := mapping.PIDAddrMapping(pid, addr)</code> line do?
Basically the function call does the following
(see <a href="https://github.com/parca-dev/parca-agent/blob/1e935f4d5f7b4484f6cf3d4ee26340f3718ff37d/pkg/maps/maps.go#L85">maps.go</a>):</p>
<ol>
<li>opens a memory map file of a given process <code>/proc/PID/maps</code></li>
<li>parses a memory map using <code>github.com/google/pprof/profile</code> package</li>
<li>looks up a mapping for a given memory address previously found in a stack trace (e.g., <code>0xdeadbeef</code>),
   i.e., it should be located between <code>m.Start</code> and <code>m.Limit</code> inclusively.
   For example, in <code>[0x55dd2d5eb000; 0x55dd2d65f000]</code> interval.</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nx">f</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">os</span><span class="p">.</span><span class="nx">Open</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Sprintf</span><span class="p">(</span><span class="s">&quot;/proc/%d/maps&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">pid</span><span class="p">),</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>

<span class="nx">mm</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">profile</span><span class="p">.</span><span class="nx">ParseProcMaps</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span><span class="w"></span>

<span class="k">for</span><span class="w"> </span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">m</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="nx">mm</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">m</span><span class="p">.</span><span class="nx">Start</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nx">addr</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">m</span><span class="p">.</span><span class="nx">Limit</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="nx">addr</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">m</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>Note, <code>mm</code> is a slice of <code>*profile.Mapping{}</code> structs
that could look as it's shown below.</p>
<div class="highlight"><pre><span></span><code><span class="nx">mm</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[]</span><span class="o">*</span><span class="nx">profile</span><span class="p">.</span><span class="nx">Mapping</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nx">ID</span><span class="p">:</span><span class="w">                     </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nx">Start</span><span class="p">:</span><span class="w">                  </span><span class="mi">94408437313536</span><span class="p">,</span><span class="w"> </span><span class="c1">// 0x55dd2d5eb000</span><span class="w"></span>
<span class="w">        </span><span class="nx">Limit</span><span class="p">:</span><span class="w">                  </span><span class="mi">94408437788672</span><span class="p">,</span><span class="w"> </span><span class="c1">// 0x55dd2d65f000</span><span class="w"></span>
<span class="w">        </span><span class="nx">Offset</span><span class="p">:</span><span class="w">                 </span><span class="mi">45056</span><span class="p">,</span><span class="w">          </span><span class="c1">// 0xb000</span><span class="w"></span>
<span class="w">        </span><span class="nx">File</span><span class="p">:</span><span class="w">                   </span><span class="s">&quot;/usr/sbin/sshd&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nx">BuildID</span><span class="p">:</span><span class="w">                </span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nx">HasFunctions</span><span class="p">:</span><span class="w">           </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nx">HasFilenames</span><span class="p">:</span><span class="w">           </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nx">HasLineNumbers</span><span class="p">:</span><span class="w">         </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nx">HasInlineFrames</span><span class="p">:</span><span class="w">        </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nx">KernelRelocationSymbol</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nx">ID</span><span class="p">:</span><span class="w">                     </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nx">Start</span><span class="p">:</span><span class="w">                  </span><span class="mi">140349706260480</span><span class="p">,</span><span class="w"> </span><span class="c1">// 0x7fa5b662d000</span><span class="w"></span>
<span class="w">        </span><span class="nx">Limit</span><span class="p">:</span><span class="w">                  </span><span class="mi">140349706448896</span><span class="p">,</span><span class="w"> </span><span class="c1">// 0x7fa5b665b000</span><span class="w"></span>
<span class="w">        </span><span class="nx">Offset</span><span class="p">:</span><span class="w">                 </span><span class="mi">24576</span><span class="p">,</span><span class="w">           </span><span class="c1">// 0x6000</span><span class="w"></span>
<span class="w">        </span><span class="nx">File</span><span class="p">:</span><span class="w">                   </span><span class="s">&quot;/usr/lib/x86_64-linux-gnu/libnss_systemd.so.2&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nx">BuildID</span><span class="p">:</span><span class="w">                </span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nx">HasFunctions</span><span class="p">:</span><span class="w">           </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nx">HasFilenames</span><span class="p">:</span><span class="w">           </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nx">HasLineNumbers</span><span class="p">:</span><span class="w">         </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nx">HasInlineFrames</span><span class="p">:</span><span class="w">        </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nx">KernelRelocationSymbol</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="c1">// ...</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>Here is the corresponding memory map file.</p>
<div class="highlight"><pre><span></span><code><span class="go">ï¹© sudo cat /proc/4068/maps</span>
<span class="go">55dd2d5e0000-55dd2d5eb000 r--p 00000000 08:01 2869         /usr/sbin/sshd</span>
<span class="go">55dd2d5eb000-55dd2d65f000 r-xp 0000b000 08:01 2869         /usr/sbin/sshd</span>
<span class="go">55dd2d65f000-55dd2d69d000 r--p 0007f000 08:01 2869         /usr/sbin/sshd</span>
<span class="go">55dd2d69e000-55dd2d6a1000 r--p 000bd000 08:01 2869         /usr/sbin/sshd</span>
<span class="go">55dd2d6a1000-55dd2d6a2000 rw-p 000c0000 08:01 2869         /usr/sbin/sshd</span>
<span class="go">55dd2d6a2000-55dd2d6a6000 rw-p 00000000 00:00 0</span>
<span class="go">55dd2e9d6000-55dd2ea68000 rw-p 00000000 00:00 0            [heap]</span>
<span class="go">55dd2ea68000-55dd2ea8a000 rw-p 00000000 00:00 0            [heap]</span>
<span class="go">7fa5b6627000-7fa5b662d000 r--p 00000000 08:01 4761         /usr/lib/x86_64-linux-gnu/libnss_systemd.so.2</span>
<span class="go">7fa5b662d000-7fa5b665b000 r-xp 00006000 08:01 4761         /usr/lib/x86_64-linux-gnu/libnss_systemd.so.2</span>
<span class="go">7fa5b665b000-7fa5b666a000 r--p 00034000 08:01 4761         /usr/lib/x86_64-linux-gnu/libnss_systemd.so.2</span>
<span class="go">7fa5b666a000-7fa5b666e000 r--p 00042000 08:01 4761         /usr/lib/x86_64-linux-gnu/libnss_systemd.so.2</span>
<span class="go">7fa5b666e000-7fa5b666f000 rw-p 00046000 08:01 4761         /usr/lib/x86_64-linux-gnu/libnss_systemd.so.2</span>
<span class="go">7fa5b6675000-7fa5b6676000 r--p 00000000 08:01 3974         /usr/lib/x86_64-linux-gnu/security/pam_env.so</span>

<span class="go">...</span>

<span class="go">7fa5b72f4000-7fa5b72f6000 rw-p 00034000 08:01 3657         /usr/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2</span>
<span class="go">7fff5522d000-7fff55271000 rw-p 00000000 00:00 0            [stack]</span>
<span class="go">7fff55285000-7fff55289000 r--p 00000000 00:00 0            [vvar]</span>
<span class="go">7fff55289000-7fff5528b000 r-xp 00000000 00:00 0            [vdso]</span>
<span class="go">ffffffffff600000-ffffffffff601000 --xp 00000000 00:00 0    [vsyscall]</span>
</code></pre></div>

<p>ðŸ¤”</p>
<p>Let's do a similar thing in a new profiler called profiler2.
The v2 DIY profiler is able to print a memory map file of a given process
and show the traced memory addresses of user and kernel space.</p>
<div class="highlight"><pre><span></span><code><span class="go">ï¹© sudo go run ./cmd/profiler2 -pid=4068</span>
<span class="go">/proc/4068/maps</span>
<span class="go">start=0x55dd2d5eb000 limit=0x55dd2d65f000 offset=0xb000 /usr/sbin/sshd</span>
<span class="go">...</span>

<span class="go">Waiting for stack traces...</span>
</code></pre></div>

<h2>pprof</h2>
<p>It would be great to finally see symbols (function names) instead of memory addresses
and pprof is going to help us with that.
pprof is a tool for visualization and analysis of profiling data.
It reads a collection of profiling samples in
<a href="https://github.com/google/pprof/blob/main/proto/profile.proto">profile.proto</a> format
and generates reports to visualize the collected profiles.</p>
<p>Let's get back to <code>profileLoop()</code> method and see what else it's doing:</p>
<ol>
<li>it prepares <code>prof := profile.Profile{}</code> struct which is an in-memory representation of profile.proto</li>
<li>using addresses from BPF maps it fills <code>Profile.Location</code> â€” the set of program locations;
   each location describes function and line table debug information</li>
<li>it fills <code>Profile.Sample</code> â€” the set of samples recorded in a profile</li>
<li>it fills <code>Profile.Mapping</code> â€” mapping from address ranges to the object file</li>
<li>it uploads object files to Parca server</li>
<li>it uploads pprof profile</li>
</ol>
<p>The first step is to create a CPU profile which will be saved somewhere by <code>prof.Write()</code>
after a profile was filled with samples.</p>
<div class="highlight"><pre><span></span><code><span class="nx">prof</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">profile</span><span class="p">.</span><span class="nx">Profile</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// SampleType is a description of the samples associated with each Sample.Value.</span><span class="w"></span>
<span class="w">    </span><span class="c1">// By convention the number of events should use unit &quot;count&quot; and</span><span class="w"></span>
<span class="w">    </span><span class="c1">// it should be at index 0.</span><span class="w"></span>
<span class="w">    </span><span class="nx">SampleType</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="o">*</span><span class="nx">profile</span><span class="p">.</span><span class="nx">ValueType</span><span class="p">{{</span><span class="w"></span>
<span class="w">        </span><span class="nx">Type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;samples&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nx">Unit</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;count&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">}},</span><span class="w"></span>
<span class="w">    </span><span class="c1">// TimeNanos is a time of collection (UTC) represented as nanoseconds past the epoch.</span><span class="w"></span>
<span class="w">    </span><span class="nx">TimeNanos</span><span class="p">:</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Now</span><span class="p">().</span><span class="nx">UnixNano</span><span class="p">(),</span><span class="w"></span>
<span class="w">    </span><span class="c1">// DurationNanos is a profiling duration in nanoseconds, Parca uses 10s by default.</span><span class="w"></span>
<span class="w">    </span><span class="nx">DurationNanos</span><span class="p">:</span><span class="w"> </span><span class="nb">int64</span><span class="p">(</span><span class="mi">10</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="c1">// PeriodType is the kind of events between sampled ocurrences,</span><span class="w"></span>
<span class="w">    </span><span class="c1">// i.e., [&quot;cpu&quot;, &quot;nanoseconds&quot;].</span><span class="w"></span>
<span class="w">    </span><span class="c1">//</span><span class="w"></span>
<span class="w">    </span><span class="c1">// ValueType describes the semantics and measurement units of a value.</span><span class="w"></span>
<span class="w">    </span><span class="nx">PeriodType</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">profile</span><span class="p">.</span><span class="nx">ValueType</span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nx">Type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cpu&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nx">Unit</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;nanoseconds&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Period is the number of events between sampled occurrences.</span><span class="w"></span>
<span class="w">    </span><span class="c1">// We sample at 100Hz (100 times per second),</span><span class="w"></span>
<span class="w">    </span><span class="c1">// which is every 0.01s or 10 million nanoseconds.</span><span class="w"></span>
<span class="w">    </span><span class="nx">Period</span><span class="p">:</span><span class="w"> </span><span class="mi">10000000</span><span class="p">,</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>A simplified version of the steps 2 to 4 show
how user-space stack traces (samples) are added to a pprof profile.</p>
<p>For every non-zero unique address found in stack traces
we create a <code>profile.Location{}</code> to describe a function.
A corresponding memory mapping is added to that newly created location
("Memory mapping" section above shows how to find a mapping for an address).
All the locations are appended to <code>prof.Location</code> slice.</p>
<div class="highlight"><pre><span></span><code><span class="nx">prof</span><span class="p">.</span><span class="nx">Location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">append</span><span class="p">(</span><span class="nx">prof</span><span class="p">.</span><span class="nx">Location</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">profile</span><span class="p">.</span><span class="nx">Location</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// ID is a unique nonzero id for the location.</span><span class="w"></span>
<span class="w">    </span><span class="nx">ID</span><span class="p">:</span><span class="w"> </span><span class="nb">uint64</span><span class="p">(</span><span class="nx">locIndex</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Address is the instruction address for this location.</span><span class="w"></span>
<span class="w">    </span><span class="c1">// It should be within [Mapping.memory_start...Mapping.memory_limit]</span><span class="w"></span>
<span class="w">    </span><span class="c1">// for the corresponding mapping.</span><span class="w"></span>
<span class="w">    </span><span class="nx">Address</span><span class="p">:</span><span class="w"> </span><span class="nx">addr</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Mapping is the corresponding profile.Mapping for this location.</span><span class="w"></span>
<span class="w">    </span><span class="c1">// It can be nil if the mapping is unknown.</span><span class="w"></span>
<span class="w">    </span><span class="nx">Mapping</span><span class="p">:</span><span class="w"> </span><span class="nx">m</span><span class="p">,</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
</code></pre></div>

<p>Locations related to a given stack trace are added to a sample.
Each <code>profile.Sample</code> records how many times a particular stack trace was seen.</p>
<div class="highlight"><pre><span></span><code><span class="nx">prof</span><span class="p">.</span><span class="nx">Sample</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">append</span><span class="p">(</span><span class="nx">prof</span><span class="p">.</span><span class="nx">Sample</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">profile</span><span class="p">.</span><span class="nx">Sample</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">Value</span><span class="p">:</span><span class="w">    </span><span class="p">[]</span><span class="kt">int64</span><span class="p">{</span><span class="nb">int64</span><span class="p">(</span><span class="nx">seen</span><span class="p">)},</span><span class="w"></span>
<span class="w">    </span><span class="nx">Location</span><span class="p">:</span><span class="w"> </span><span class="nx">sampleLocations</span><span class="p">,</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
</code></pre></div>

<p>At the end, all the mappings get assigned IDs starting with one
because ID zero is reserved.
The pprof tool will show the following error if ID zero is used:
<code>malformed profile: found mapping with reserved ID=0</code>.
See the whole code snippet in the details below.</p>
<details>


<div class="highlight"><pre><span></span><code><span class="kd">type</span><span class="w"> </span><span class="nx">locationIndex</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">PID</span><span class="w">  </span><span class="kt">int</span><span class="w"></span>
<span class="w">    </span><span class="nx">Addr</span><span class="w"> </span><span class="kt">uint64</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// locationIndices maps {pid; addr} found in the sample</span><span class="w"></span>
<span class="c1">// to an index in the Profile.Location slice</span><span class="w"></span>
<span class="c1">// to look up a respective Location.</span><span class="w"></span>
<span class="nx">locationIndices</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="nx">locationIndex</span><span class="p">]</span><span class="kt">int</span><span class="p">)</span><span class="w"></span>

<span class="k">for</span><span class="w"> </span><span class="nx">it</span><span class="p">.</span><span class="nx">Next</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Collect user-space stack trace samples.</span><span class="w"></span>
<span class="w">    </span><span class="nx">sampleLocations</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">[]</span><span class="o">*</span><span class="nx">profile</span><span class="p">.</span><span class="nx">Location</span><span class="p">{}</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">addr</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="nx">userStack</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">addr</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">continue</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Look up a location for the given PID and address</span><span class="w"></span>
<span class="w">        </span><span class="c1">// and append it to the current sample&#39;s locations.</span><span class="w"></span>
<span class="w">        </span><span class="c1">//</span><span class="w"></span>
<span class="w">        </span><span class="c1">// In case a location wasn&#39;t found, create one.</span><span class="w"></span>
<span class="w">        </span><span class="nx">key</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">locationIndex</span><span class="p">{</span><span class="nx">pid</span><span class="p">,</span><span class="w"> </span><span class="nx">addr</span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="nx">locIndex</span><span class="p">,</span><span class="w"> </span><span class="nx">found</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">locationIndices</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">!</span><span class="nx">found</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nx">m</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">mappingForAddr</span><span class="p">(</span><span class="nx">mm</span><span class="p">,</span><span class="w"> </span><span class="nx">addr</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="nx">m</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="nx">log</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;failed to get process mapping for addr: %x&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">addr</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>

<span class="w">            </span><span class="nx">locIndex</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="nx">prof</span><span class="p">.</span><span class="nx">Location</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="c1">// Each Location describes function and line table debug information.</span><span class="w"></span>
<span class="w">            </span><span class="nx">prof</span><span class="p">.</span><span class="nx">Location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">append</span><span class="p">(</span><span class="nx">prof</span><span class="p">.</span><span class="nx">Location</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">profile</span><span class="p">.</span><span class="nx">Location</span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="c1">// ID is a unique nonzero id for the location.</span><span class="w"></span>
<span class="w">                </span><span class="nx">ID</span><span class="p">:</span><span class="w"> </span><span class="nb">uint64</span><span class="p">(</span><span class="nx">locIndex</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"></span>
<span class="w">                </span><span class="c1">// Address is the instruction address for this location.</span><span class="w"></span>
<span class="w">                </span><span class="c1">// It should be within [Mapping.memory_start...Mapping.memory_limit]</span><span class="w"></span>
<span class="w">                </span><span class="c1">// for the corresponding mapping.</span><span class="w"></span>
<span class="w">                </span><span class="nx">Address</span><span class="p">:</span><span class="w"> </span><span class="nx">addr</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="c1">// Mapping is the corresponding profile.Mapping for this location.</span><span class="w"></span>
<span class="w">                </span><span class="c1">// It can be nil if the mapping is unknown.</span><span class="w"></span>
<span class="w">                </span><span class="nx">Mapping</span><span class="p">:</span><span class="w"> </span><span class="nx">m</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="p">})</span><span class="w"></span>
<span class="w">            </span><span class="nx">locationIndices</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">locIndex</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="nx">sampleLocations</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">append</span><span class="p">(</span><span class="nx">sampleLocations</span><span class="p">,</span><span class="w"> </span><span class="nx">prof</span><span class="p">.</span><span class="nx">Location</span><span class="p">[</span><span class="nx">locIndex</span><span class="p">])</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Each Sample records how many times a particular stack trace was seen</span><span class="w"></span>
<span class="w">    </span><span class="c1">// along with the corresponding locations.</span><span class="w"></span>
<span class="w">    </span><span class="nx">prof</span><span class="p">.</span><span class="nx">Sample</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">append</span><span class="p">(</span><span class="nx">prof</span><span class="p">.</span><span class="nx">Sample</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">profile</span><span class="p">.</span><span class="nx">Sample</span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nx">Value</span><span class="p">:</span><span class="w">    </span><span class="p">[]</span><span class="kt">int64</span><span class="p">{</span><span class="nb">int64</span><span class="p">(</span><span class="nx">seen</span><span class="p">)},</span><span class="w"></span>
<span class="w">        </span><span class="nx">Location</span><span class="p">:</span><span class="w"> </span><span class="nx">sampleLocations</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// Mappings in pprof must have IDs and need to start with 1.</span><span class="w"></span>
<span class="k">for</span><span class="w"> </span><span class="nx">i</span><span class="p">,</span><span class="w"> </span><span class="nx">m</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="nx">mm</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">m</span><span class="p">.</span><span class="nx">ID</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">uint64</span><span class="p">(</span><span class="nx">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="nx">prof</span><span class="p">.</span><span class="nx">Mapping</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">mm</span><span class="w"></span>
</code></pre></div>



</details>

<p>ðŸ§ª</p>
<p>Putting those steps together gives us profiler3.
In v3 DIY profiler we write a CPU profile to <code>cpu.pprof</code> file
instead of uploading it to a Parca server.
Let's run profiler3 and make sure the profiled program does something instead of idling,
so there will be enough CPU samples.</p>
<div class="highlight"><pre><span></span><code><span class="go">ï¹© sudo go run ./cmd/profiler3 -pid=4068</span>
<span class="go">/proc/4068/maps</span>
<span class="go">start=0x55dd2d5eb000 limit=0x55dd2d65f000 offset=0xb000 /usr/sbin/sshd</span>
<span class="go">...</span>

<span class="go">Waiting for stack traces for 10s...</span>
</code></pre></div>

<p>After ten seconds the profiler will terminate leaving you with <code>cpu.pprof</code> file.
You can inspect it with <code>go tool pprof cpu.pprof</code> command.</p>
<p>Exploring Parca Agent's internals and reconstructing it in the simplest form
helped me demystify some of aspects of BPF CPU profilers.</p><p class="subheader">Category: <a href="https://marselester.com/category/go.html">Go</a>

    Tagged: 
    <a href="https://marselester.com/tag/bpf.html">bpf </a>
    <a href="https://marselester.com/tag/golang.html">golang </a>
    <a href="https://marselester.com/tag/monitoring.html">monitoring </a>
</p>



<p><a href="https://marselester.com/diy-cpu-profiler-from-bpf-maps-to-pprof.html#disqus_thread">comments</a></p>            </article>


                <hr  class="gradient"/>


        


            <article>
                <a href="https://marselester.com/continuous-profiling-in-go.html"><h3 class="article-title">Continuous profiling in Go</h3></a>
<h6 class="subheader" title="2022-04-22T00:00:00+07:00">Fri 22 April 2022
</h6>


<p>In this post I explore possibilities of continuous profiling of Go programs
using Parca and also peek under the hood of its BPF agent.
You can find the results of my experiments in
<a href="https://github.com/marselester/diy-parca-agent">github.com/marselester/diy-parca-agent</a>.</p>
<h2>Ad hoc profiling</h2>
<p>I was looking for a way to profile Go programs â€¦</p><p class="subheader">Category: <a href="https://marselester.com/category/go.html">Go</a>

    Tagged: 
    <a href="https://marselester.com/tag/bpf.html">bpf </a>
    <a href="https://marselester.com/tag/golang.html">golang </a>
    <a href="https://marselester.com/tag/monitoring.html">monitoring </a>
</p>



<p><a href="https://marselester.com/continuous-profiling-in-go.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="https://marselester.com/continuous-profiling-in-go.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="https://marselester.com/bpf-go-program-in-kubernetes.html"><h3 class="article-title">BPF Go program in Kubernetes</h3></a>
<h6 class="subheader" title="2021-11-17T00:00:00+07:00">Wed 17 November 2021
</h6>


<p>BPF opens a lot of possibilities of making observability tools running in Kubernetes.
One can start with <a href="https://github.com/iovisor/bcc/tree/master/libbpf-tools">BCC libbpf-tools</a> written in C,
e.g., launch tcpconnlat program and process its stdout with another program to
detect cases when it took too long to establish a TCP connection.
For example, <code>curl â€¦</code></p><p class="subheader">Category: <a href="https://marselester.com/category/go.html">Go</a>

    Tagged: 
    <a href="https://marselester.com/tag/bpf.html">bpf </a>
    <a href="https://marselester.com/tag/golang.html">golang </a>
    <a href="https://marselester.com/tag/kubernetes.html">kubernetes </a>
</p>



<p><a href="https://marselester.com/bpf-go-program-in-kubernetes.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="https://marselester.com/bpf-go-program-in-kubernetes.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="https://marselester.com/bpf-go-frontend-for-tcpconnect.html"><h3 class="article-title">BPF: Go frontend for tcpconnect</h3></a>
<h6 class="subheader" title="2021-11-01T00:00:00+07:00">Mon 01 November 2021
</h6>


<p><a href="https://marselester.com/bpf-go-frontend-for-execsnoop.html">In the previos BPF post</a>
I shared my experiment of writing Go frontend for execsnoop.
Here I would like to focus on tcpconnect, a BCC tool to trace new TCP active connections.
It is useful for determining who is connecting to whom.
This works by tracing the <code>tcp_v4_connect()</code> and <code>tcp_v6_connect â€¦</code></p><p class="subheader">Category: <a href="https://marselester.com/category/go.html">Go</a>

    Tagged: 
    <a href="https://marselester.com/tag/bpf.html">bpf </a>
    <a href="https://marselester.com/tag/golang.html">golang </a>
</p>



<p><a href="https://marselester.com/bpf-go-frontend-for-tcpconnect.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="https://marselester.com/bpf-go-frontend-for-tcpconnect.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="https://marselester.com/bpf-go-frontend-for-execsnoop.html"><h3 class="article-title">BPF: Go frontend for execsnoop</h3></a>
<h6 class="subheader" title="2021-10-26T00:00:00+07:00">Tue 26 October 2021
</h6>


<p>After reading Brendan Gregg's books about BPF I was excited to try and implement something in Go.
At a first glance it turned out I would need to install LLVM, Clang, and kernel header dependencies to run a simple program.
Fortunately <a href="https://www.brendangregg.com/blog/2020-11-04/bpf-co-re-btf-libbpf.html">BTF, CO-RE technologies</a>
eliminate those dependencies though kernel &gt;=5 â€¦</p><p class="subheader">Category: <a href="https://marselester.com/category/go.html">Go</a>

    Tagged: 
    <a href="https://marselester.com/tag/bpf.html">bpf </a>
    <a href="https://marselester.com/tag/golang.html">golang </a>
</p>



<p><a href="https://marselester.com/bpf-go-frontend-for-execsnoop.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="https://marselester.com/bpf-go-frontend-for-execsnoop.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="https://marselester.com/apigate-ambassador.html"><h3 class="article-title">Ambassador as API Gateway</h3></a>
<h6 class="subheader" title="2019-03-13T00:00:00+07:00">Wed 13 March 2019
</h6>


<p><a class="reference external" href="https://docs.microsoft.com/en-us/azure/architecture/microservices/design/gateway">API gateway</a>
acts as a reverse proxy, routing API requests from clients to services.
Usually it also performs authentication and rate limiting, so the services behind the gate don't have to.
In this short tutorial we'll see how to achieve that with <a class="reference external" href="https://getambassador.io/">Ambassador</a>.</p>
<p>The demo is based on a dummy â€¦</p><p class="subheader">Category: <a href="https://marselester.com/category/infrastructure.html">Infrastructure</a>

    Tagged: 
    <a href="https://marselester.com/tag/ambassador.html">ambassador </a>
    <a href="https://marselester.com/tag/kubernetes.html">kubernetes </a>
    <a href="https://marselester.com/tag/api-gateway.html">api gateway </a>
    <a href="https://marselester.com/tag/auth.html">auth </a>
    <a href="https://marselester.com/tag/rate-limiting.html">rate limiting </a>
</p>



<p><a href="https://marselester.com/apigate-ambassador.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="https://marselester.com/apigate-ambassador.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="https://marselester.com/apigate-traefik.html"><h3 class="article-title">Traefik as API Gateway</h3></a>
<h6 class="subheader" title="2019-03-12T00:00:00+07:00">Tue 12 March 2019
</h6>


<p><a class="reference external" href="https://docs.microsoft.com/en-us/azure/architecture/microservices/design/gateway">API gateway</a>
acts as a reverse proxy, routing API requests from clients to services.
Usually it also performs authentication and rate limiting, so the services behind the gate don't have to.
In this short tutorial we'll see how to achieve that with <a class="reference external" href="https://traefik.io/">Traefik</a> reverse-proxy.</p>
<p>The demo is based on a â€¦</p><p class="subheader">Category: <a href="https://marselester.com/category/infrastructure.html">Infrastructure</a>

    Tagged: 
    <a href="https://marselester.com/tag/traefik.html">traefik </a>
    <a href="https://marselester.com/tag/kubernetes.html">kubernetes </a>
    <a href="https://marselester.com/tag/api-gateway.html">api gateway </a>
    <a href="https://marselester.com/tag/auth.html">auth </a>
    <a href="https://marselester.com/tag/rate-limiting.html">rate limiting </a>
</p>



<p><a href="https://marselester.com/apigate-traefik.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="https://marselester.com/apigate-traefik.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="https://marselester.com/how-to-structure-go-projects.html"><h3 class="article-title">How to Structure Go Projects</h3></a>
<h6 class="subheader" title="2018-09-28T00:00:00+07:00">Fri 28 September 2018
</h6>


<p>I came to Go from Django where the framework defines project layout, thus I wanted to know
how to structure my Go applications. After reading documentation and building a few Django projects,
you get a clear mental picture, as most of the questions are already answered.
That helps to keep â€¦</p><p class="subheader">Category: <a href="https://marselester.com/category/go.html">Go</a>

    Tagged: 
    <a href="https://marselester.com/tag/golang.html">golang </a>
    <a href="https://marselester.com/tag/project-structure.html">project structure </a>
    <a href="https://marselester.com/tag/domain-driven-design.html">Domain-Driven Design </a>
</p>



<p><a href="https://marselester.com/how-to-structure-go-projects.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="https://marselester.com/how-to-structure-go-projects.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="https://marselester.com/prometheus-via-dogstatsd.html"><h3 class="article-title">Forward DogStatsD Metrics to Prometheus</h3></a>
<h6 class="subheader" title="2017-06-17T00:00:00+07:00">Sat 17 June 2017
</h6>


<p><strong>tl;dr:</strong> StatsD doesn't have metric labels, DogStatsD does.</p>
<p>This is a follow up post after
<a class="reference external" href="https://marselester.com/django-prometheus-via-statsd.html">Instrumenting Django with Prometheus and StatsD</a>.</p>
<hr class="docutils" />
<p>You got Prometheus up and running and eager to start instrumenting your Django application.
Don't be hasty and read <a class="reference external" href="https://prometheus.io/docs/practices/instrumentation/">Prometheus Best Practices</a>.</p>
<p>Let's say our application has to â€¦</p><p class="subheader">Category: <a href="https://marselester.com/category/infrastructure.html">Infrastructure</a>

    Tagged: 
    <a href="https://marselester.com/tag/prometheus.html">prometheus </a>
    <a href="https://marselester.com/tag/monitoring.html">monitoring </a>
    <a href="https://marselester.com/tag/statsd.html">statsd </a>
    <a href="https://marselester.com/tag/dogstatsd.html">dogstatsd </a>
    <a href="https://marselester.com/tag/datadog.html">datadog </a>
</p>



<p><a href="https://marselester.com/prometheus-via-dogstatsd.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="https://marselester.com/prometheus-via-dogstatsd.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="https://marselester.com/django-prometheus-via-statsd.html"><h3 class="article-title">Instrumenting Django with Prometheus and StatsD</h3></a>
<h6 class="subheader" title="2017-06-09T00:00:00+07:00">Fri 09 June 2017
</h6>


<p>If you ever wondered how to monitor your Django application with Prometheus this article is for you.
Quick search on the topic will lead you to <a class="reference external" href="https://github.com/korfuri/django-prometheus/">django-prometheus</a>.
For those who don't want to use it, there is another way to export application metrics
via <a class="reference external" href="https://www.datadoghq.com/blog/statsd/">StatsD</a>.</p>
<p>The idea is to send â€¦</p><p class="subheader">Category: <a href="https://marselester.com/category/infrastructure.html">Infrastructure</a>

    Tagged: 
    <a href="https://marselester.com/tag/django.html">django </a>
    <a href="https://marselester.com/tag/prometheus.html">prometheus </a>
    <a href="https://marselester.com/tag/kubernetes.html">kubernetes </a>
    <a href="https://marselester.com/tag/monitoring.html">monitoring </a>
    <a href="https://marselester.com/tag/statsd.html">statsd </a>
    <a href="https://marselester.com/tag/helm.html">helm </a>
</p>



<p><a href="https://marselester.com/django-prometheus-via-statsd.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="https://marselester.com/django-prometheus-via-statsd.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="https://marselester.com/minukube-aws-ecr.html"><h3 class="article-title">Minukube &amp; Amazon EC2 Container Registry</h3></a>
<h6 class="subheader" title="2016-12-05T00:00:00+07:00">Mon 05 December 2016
</h6>


<p><a class="reference external" href="http://kubernetes.io/docs/getting-started-guides/minikube/">Minukube</a> is an easy way to run Kubernetes locally.
When we want to build a Docker image in Minukube (so Kubernetes has an access to it),
we can configure our Docker client to communicate with the Minikube Docker daemon.</p>
<div class="highlight"><pre><span></span><span class="gp">$ </span>minikube start
<span class="go">Starting local Kubernetes cluster...</span>
<span class="go">Kubectl is now configured to â€¦</span></pre></div><p class="subheader">Category: <a href="https://marselester.com/category/infrastructure.html">Infrastructure</a>

    Tagged: 
    <a href="https://marselester.com/tag/kubernetes.html">kubernetes </a>
    <a href="https://marselester.com/tag/aws.html">aws </a>
    <a href="https://marselester.com/tag/minukube.html">minukube </a>
</p>



<p><a href="https://marselester.com/minukube-aws-ecr.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="https://marselester.com/minukube-aws-ecr.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="https://marselester.com/prometheus-on-kubernetes.html"><h3 class="article-title">Prometheus on Kubernetes</h3></a>
<h6 class="subheader" title="2016-11-13T00:00:00+07:00">Sun 13 November 2016
</h6>


<p><a class="reference external" href="https://prometheus.io/">Prometheus</a> is a monitoring toolkit.
Let's set it up on Kubernetes and test how it works by scraping HTTP request metrics
from <a class="reference external" href="https://github.com/marselester/prometheus-on-kubernetes">hello web application</a>
which also runs in the same cluster.</p>
<p>First of all, we need Kubernetes cluster running. It's easy to bootstrap one via <a class="reference external" href="https://console.cloud.google.com">Google Container Engine</a>.</p>
<div class="highlight"><pre><span></span><span class="gp">$ </span>gcloud â€¦</pre></div><p class="subheader">Category: <a href="https://marselester.com/category/infrastructure.html">Infrastructure</a>

    Tagged: 
    <a href="https://marselester.com/tag/prometheus.html">prometheus </a>
    <a href="https://marselester.com/tag/kubernetes.html">kubernetes </a>
    <a href="https://marselester.com/tag/monitoring.html">monitoring </a>
    <a href="https://marselester.com/tag/golang.html">golang </a>
    <a href="https://marselester.com/tag/google-container-engine.html">Google Container Engine </a>
</p>



<p><a href="https://marselester.com/prometheus-on-kubernetes.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="https://marselester.com/prometheus-on-kubernetes.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="https://marselester.com/drf-pagination.html"><h3 class="article-title">Django REST framework: pagination on PostgreSQL triggers</h3></a>
<h6 class="subheader" title="2016-04-02T00:00:00+07:00">Sat 02 April 2016
</h6>


<p>Django and Django REST Framework use SQL COUNT in pagination.
As your database grows SQL COUNT becomes too slow. Fortunately the frameworks
are well designed and allow to customize a way items are count.
Let me illustrate that on a typical &quot;books&quot; example.</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Author</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField â€¦</span></pre></div><p class="subheader">Category: <a href="https://marselester.com/category/python.html">Python</a>

    Tagged: 
    <a href="https://marselester.com/tag/python.html">python </a>
    <a href="https://marselester.com/tag/django.html">django </a>
    <a href="https://marselester.com/tag/postgresql.html">postgresql </a>
    <a href="https://marselester.com/tag/django-rest-framework.html">django rest framework </a>
    <a href="https://marselester.com/tag/pagination.html">pagination </a>
</p>



<p><a href="https://marselester.com/drf-pagination.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="https://marselester.com/drf-pagination.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="https://marselester.com/api-based-on-flask.html"><h3 class="article-title">API based on Flask</h3></a>
<h6 class="subheader" title="2013-12-09T00:00:00+07:00">Mon 09 December 2013
</h6>


<p>Here I want to consider implementation of API best practices which
usually don't follow Fielding's REST strictly. <a class="reference external" href="https://github.com/marselester/api-example-based-on-flask">Example Flask project</a>
is on GitHub.</p>
<div class="section" id="api-versioning">
<h2>API Versioning</h2>
<p>Interfaces are changed hence versioning is mandatory in order to not annoy
your users. You might need to add new resource or field to particular â€¦</p></div><p class="subheader">Category: <a href="https://marselester.com/category/python.html">Python</a>

    Tagged: 
    <a href="https://marselester.com/tag/python.html">python </a>
    <a href="https://marselester.com/tag/flask.html">flask </a>
    <a href="https://marselester.com/tag/api.html">api </a>
</p>



<p><a href="https://marselester.com/api-based-on-flask.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="https://marselester.com/api-based-on-flask.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="https://marselester.com/saltstack-slides.html"><h3 class="article-title">Slides about SaltStack</h3></a>
<h6 class="subheader" title="2013-12-03T00:00:00+07:00">Tue 03 December 2013
</h6>


<p><strong>Update</strong> I gave a talk with <a class="reference external" href="https://twitter.com/shr">Simon Robson</a> at <a class="reference external" href="https://twitter.com/barcampcm">Beercamp</a> in Chiang Mai,
Thailand on 12 Dec 2013. We compared Salt and <a class="reference external" href="http://slid.es/simonrobson/ansible">Ansible</a>.
Here are my <a class="reference external" href="https://slid.es/marselester/saltstack">slides</a>.</p>
<p class="subheader">Category: <a href="https://marselester.com/category/infrastructure.html">Infrastructure</a>

    Tagged: 
    <a href="https://marselester.com/tag/salt.html">salt </a>
    <a href="https://marselester.com/tag/saltstack.html">saltstack </a>
    <a href="https://marselester.com/tag/slides.html">slides </a>
    <a href="https://marselester.com/tag/talk.html">talk </a>
</p>



<p><a href="https://marselester.com/saltstack-slides.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="https://marselester.com/saltstack-slides.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="https://marselester.com/developing-and-deploying-django-project-with-saltstack.html"><h3 class="article-title">Developing &amp; Deploying Django project with SaltStack</h3></a>
<h6 class="subheader" title="2013-11-28T00:00:00+07:00">Thu 28 November 2013
</h6>


<p>Eventually you will need to deploy project,
but deployment was not considered in the <a class="reference external" href="https://marselester.com/developing-django-project-with-saltstack.html">previous post</a>. Let's find it out.</p>
<p>Server configuration is different from local, thus environments will be needed
(at least production <strong>prod</strong> and development <strong>dev</strong>). Salt uses <strong>base</strong>
environment by default.</p>
<p>Environments are set in <tt class="docutils literal">minion.conf â€¦</tt></p><p class="subheader">Category: <a href="https://marselester.com/category/infrastructure.html">Infrastructure</a>

    Tagged: 
    <a href="https://marselester.com/tag/python.html">python </a>
    <a href="https://marselester.com/tag/django.html">django </a>
    <a href="https://marselester.com/tag/vagrant.html">vagrant </a>
    <a href="https://marselester.com/tag/salt.html">salt </a>
    <a href="https://marselester.com/tag/saltstack.html">saltstack </a>
</p>



<p><a href="https://marselester.com/developing-and-deploying-django-project-with-saltstack.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="https://marselester.com/developing-and-deploying-django-project-with-saltstack.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="https://marselester.com/developing-django-project-with-saltstack.html"><h3 class="article-title">Developing Django project with SaltStack</h3></a>
<h6 class="subheader" title="2013-11-09T00:00:00+07:00">Sat 09 November 2013
</h6>


<p>Let's use <a class="reference external" href="https://github.com/marselester/abstract-internal-messaging">Messaging System</a> as an example of Django project. I want it to
run in VirtualBox which is managed by Vagrant. Infrastructure management
is provided by SaltStack.</p>
<p>I advise you to create separate folder for repositories (currently there
is only one) of project and clone <a class="reference external" href="https://github.com/marselester/abstract-internal-messaging">Messaging System</a> there.
Also â€¦</p><p class="subheader">Category: <a href="https://marselester.com/category/infrastructure.html">Infrastructure</a>

    Tagged: 
    <a href="https://marselester.com/tag/python.html">python </a>
    <a href="https://marselester.com/tag/django.html">django </a>
    <a href="https://marselester.com/tag/vagrant.html">vagrant </a>
    <a href="https://marselester.com/tag/salt.html">salt </a>
    <a href="https://marselester.com/tag/saltstack.html">saltstack </a>
</p>



<p><a href="https://marselester.com/developing-django-project-with-saltstack.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="https://marselester.com/developing-django-project-with-saltstack.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="https://marselester.com/preparation-to-python-interview.html"><h3 class="article-title">Preparation to Python Interview</h3></a>
<h6 class="subheader" title="2012-11-02T00:00:00+07:00">Fri 02 November 2012
</h6>


<p>I decided to collect a little more information and experience during
preparation to Python developer interview. These are some information and
links which seemed important to me. Maybe it will be helpful.</p>
<div class="section" id="how-does-it-usually-go">
<h2>How does it usually go?</h2>
<div class="section" id="what-kind-of-projects-did-you-participate-in">
<h3>What kind of projects did you participate in?</h3>
<p>What did you do at â€¦</p></div></div><p class="subheader">Category: <a href="https://marselester.com/category/python.html">Python</a>

    Tagged: 
    <a href="https://marselester.com/tag/python.html">python </a>
    <a href="https://marselester.com/tag/interview.html">interview </a>
</p>



<p><a href="https://marselester.com/preparation-to-python-interview.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="https://marselester.com/preparation-to-python-interview.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="https://marselester.com/django-todo-testing-during-construction.html"><h3 class="article-title">Django TODO: Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð²Ð¾ Ð²Ñ€ÐµÐ¼Ñ ÐºÐ¾Ð½ÑÑ‚Ñ€ÑƒÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ</h3></a>
<h6 class="subheader" title="2012-06-29T13:00:00+07:00">Fri 29 June 2012
</h6>


<p>Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ, Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÐ¼Ð¾Ðµ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ°Ð¼Ð¸ -- Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ð²Ð°Ð¶Ð½ÐµÐ¹ÑˆÐ¸Ñ… ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð² Ð¿Ð¾Ð»Ð½Ð¾Ð¹
ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ð¸ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ.</p>
<p>Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¼Ð¾Ð¶ÐµÑ‚ ÑƒÐºÐ°Ð·Ð°Ñ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð½Ð° Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð´ÐµÑ„ÐµÐºÑ‚Ð½Ñ‹Ðµ Ð¾Ð±Ð»Ð°ÑÑ‚Ð¸ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹ --
Ð¾Ð½Ð¾ Ð½Ðµ ÑÐ´ÐµÐ»Ð°ÐµÑ‚ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñƒ ÑƒÐ´Ð¾Ð±Ð½ÐµÐµ Ð² Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ð¸, Ð±Ð¾Ð»ÐµÐµ Ð±Ñ‹ÑÑ‚Ñ€Ð¾Ð¹, ÐºÐ¾Ð¼Ð¿Ð°ÐºÑ‚Ð½Ð¾Ð¹,
ÑƒÐ´Ð¾Ð±Ð¾Ñ‡Ð¸Ñ‚Ð°ÐµÐ¼Ð¾Ð¹ Ð¸Ð»Ð¸ Ñ€Ð°ÑÑˆÐ¸Ñ€ÑÐµÐ¼Ð¾Ð¹.</p>
<p>Ð¦ÐµÐ»ÑŒ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð¾Ð¿Ð¾Ð»Ð¾Ð¶Ð½Ð° Ñ†ÐµÐ»ÑÐ¼ Ð´Ñ€ÑƒÐ³Ð¸Ñ… ÑÑ‚Ð°Ð¿Ð¾Ð² Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸. Ð•Ð³Ð¾ Ñ†ÐµÐ»ÑŒÑŽ
ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð½Ð°Ñ…Ð¾Ð¶Ð´ÐµÐ½Ð¸Ðµ Ð¾ÑˆÐ¸Ð±Ð¾Ðº. Ð£ÑÐ¿ÐµÑˆÐ½Ñ‹Ð¼ ÑÑ‡Ð¸Ñ‚Ð°ÐµÑ‚ÑÑ Ñ‚ÐµÑÑ‚, Ð½Ð°Ñ€ÑƒÑˆÐ°ÑŽÑ‰Ð¸Ð¹ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ ÐŸÐž â€¦</p><p class="subheader">Category: <a href="https://marselester.com/category/python.html">Python</a>

    Tagged: 
    <a href="https://marselester.com/tag/python.html">python </a>
    <a href="https://marselester.com/tag/django.html">django </a>
    <a href="https://marselester.com/tag/django-todo.html">django-todo </a>
    <a href="https://marselester.com/tag/testing.html">testing </a>
</p>



<p><a href="https://marselester.com/django-todo-testing-during-construction.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="https://marselester.com/django-todo-testing-during-construction.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="https://marselester.com/django-todo-system-construction.html"><h3 class="article-title">Django TODO: ÐºÐ¾Ð½ÑÑ‚Ñ€ÑƒÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹</h3></a>
<h6 class="subheader" title="2012-06-29T12:00:00+07:00">Fri 29 June 2012
</h6>


<p>ÐŸÑ€Ð¸ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ Ð½Ð°Ð´ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¾Ð¼ ÐºÐ¾Ð½ÑÑ‚Ñ€ÑƒÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð²ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ Ð´Ñ€ÑƒÐ³Ð¸Ðµ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÑ‹, Ð² Ñ‚Ð¾Ð¼ Ñ‡Ð¸ÑÐ»Ðµ
Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ. Ð¤Ð¾Ñ€Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð° Ð´Ð°ÐµÑ‚ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð½Ð° Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹
ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ð¾Ð³Ð¾ ÑƒÑ€Ð¾Ð²Ð½Ñ, Ð¿Ñ€Ð¸ ÑÑ‚Ð¾Ð¼ Ð·Ð½Ð°Ñ‡Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ñ‡Ð°ÑÑ‚ÑŒ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ
Ð½Ð°Ð¼ÐµÑ€ÐµÐ½Ð½Ð¾ Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð° Ð½Ð° ÑÑ‚Ð°Ð¿ ÐºÐ¾Ð½ÑÑ‚Ñ€ÑƒÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ. ÐŸÑ€Ð¾ÐµÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ -- ÑÑ‚Ð¾
&quot;Ð¿Ð¾ÑÑ‚ÐµÐ¿ÐµÐ½Ð½Ñ‹Ð¹&quot; Ð¿Ñ€Ð¾Ñ†ÐµÑÑ. ÐŸÑ€Ð¾ÐµÐºÑ‚Ñ‹ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹ Ð½Ðµ Ð²Ð¾Ð·Ð½Ð¸ÐºÐ°ÑŽÑ‚ Ð² ÑƒÐ¼Ð°Ñ… Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ¾Ð²
ÑÑ€Ð°Ð·Ñƒ Ð² Ð³Ð¾Ñ‚Ð¾Ð²Ð¾Ð¼ Ð²Ð¸Ð´Ðµ. ÐžÐ½Ð¸ Ñ€Ð°Ð·Ð²Ð¸Ð²Ð°ÑŽÑ‚ÑÑ â€¦</p><p class="subheader">Category: <a href="https://marselester.com/category/python.html">Python</a>

    Tagged: 
    <a href="https://marselester.com/tag/python.html">python </a>
    <a href="https://marselester.com/tag/django.html">django </a>
    <a href="https://marselester.com/tag/django-todo.html">django-todo </a>
    <a href="https://marselester.com/tag/construction.html">construction </a>
</p>



<p><a href="https://marselester.com/django-todo-system-construction.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="https://marselester.com/django-todo-system-construction.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="https://marselester.com/django-todo-design-architecture.html"><h3 class="article-title">Django TODO: Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ñ‹ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹</h3></a>
<h6 class="subheader" title="2012-06-29T11:00:00+07:00">Fri 29 June 2012
</h6>


<p>Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¼ ÑÑ‚Ð°Ð¿Ð¾Ð¼ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ñ‹.</p>
<p>ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð° Ð´Ð¾Ð»Ð¶Ð½Ð° Ð±Ñ‹Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð´ÑƒÐ¼Ð°Ð½Ð½Ñ‹Ð¼ ÐºÐ¾Ð½Ñ†ÐµÐ¿Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ð¼ Ñ†ÐµÐ»Ñ‹Ð¼. Ð“Ð»Ð°Ð²Ð½Ñ‹Ð¹ Ñ‚ÐµÐ·Ð¸Ñ ÑÐ°Ð¼Ð¾Ð¹
Ð¿Ð¾Ð¿ÑƒÐ»ÑÑ€Ð½Ð¾Ð¹ ÐºÐ½Ð¸Ð³Ð¸ Ð¿Ð¾ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ ÐŸÐž &quot;ÐœÐ¸Ñ„Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐºÐ¾-Ð¼ÐµÑÑÑ†&quot; Ð³Ð»Ð°ÑÐ¸Ñ‚, Ñ‡Ñ‚Ð¾
Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð¾Ð¹, Ñ…Ð°Ñ€Ð°ÐºÑ‚ÐµÑ€Ð½Ð¾Ð¹ Ð´Ð»Ñ ÐºÑ€ÑƒÐ¿Ð½Ñ‹Ñ… ÑÐ¸ÑÑ‚ÐµÐ¼, ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸Ðµ Ð¸Ñ…
ÐºÐ¾Ð½Ñ†ÐµÐ¿Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ð¹ Ñ†ÐµÐ»Ð¾ÑÑ‚Ð½Ð¾ÑÑ‚Ð¸. Ð¥Ð¾Ñ€Ð¾ÑˆÐ°Ñ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð° Ð´Ð¾Ð»Ð¶Ð½Ð° ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²Ð¾Ð²Ð°Ñ‚ÑŒ
Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ðµ <a class="footnote-reference" href="#mcconnell" id="footnote-reference-1">[1]</a>.</p>
<p>Ð Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð¸Ðµ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹ Ð½Ð° Ð¿Ð¾Ð´ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹ Ð½Ð° ÑƒÑ€Ð¾Ð²Ð½Ðµ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ñ‹, Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ â€¦</p><p class="subheader">Category: <a href="https://marselester.com/category/python.html">Python</a>

    Tagged: 
    <a href="https://marselester.com/tag/python.html">python </a>
    <a href="https://marselester.com/tag/django.html">django </a>
    <a href="https://marselester.com/tag/django-todo.html">django-todo </a>
    <a href="https://marselester.com/tag/architecture.html">architecture </a>
</p>



<p><a href="https://marselester.com/django-todo-design-architecture.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="https://marselester.com/django-todo-design-architecture.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="https://marselester.com/django-todo-development-of-system-requirements.html"><h3 class="article-title">Django TODO: Ð²Ñ‹Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ð¹ Ðº ÑÐ¸ÑÑ‚ÐµÐ¼Ðµ</h3></a>
<h6 class="subheader" title="2012-06-29T11:00:00+07:00">Fri 29 June 2012
</h6>


<p>ÐŸÐ¾ÑÐ»Ðµ Ð¿Ñ€Ð¾Ñ‡Ñ‚ÐµÐ½Ð¸Ñ ÐœÐ°ÐºÐºÐ¾Ð½ÐµÐ»Ð»Ð° Ð·Ð°Ñ…Ð¾Ñ‚ÐµÐ»Ð¾ÑÑŒ ÑÐ¿Ñ€Ð¾ÐµÑ†Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÐµÐ³Ð¾ ÑÐ¾Ð²ÐµÑ‚Ñ‹ Ð½Ð° Django.
Ð”Ð»Ñ ÑÑ‚Ð¾Ð³Ð¾ Ñ Ð²Ð·ÑÐ» Ð·Ð° Ð¾ÑÐ½Ð¾Ð²Ñƒ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÑƒ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹ <a class="reference external" href="https://github.com/marselester/django-todo">Django TODO</a>. Ð˜Ñ‚Ð°Ðº, Ð¿ÐµÑ€Ð²Ñ‹Ð¹ ÑÑ‚Ð°Ð¿ -- Ð²Ñ‹Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ð¹ Ðº
ÑÐ¸ÑÑ‚ÐµÐ¼Ðµ.</p>
<p>Ð¢Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¿Ð¾Ð´Ñ€Ð¾Ð±Ð½Ð¾ Ð¾Ð¿Ð¸ÑÑ‹Ð²Ð°ÑŽÑ‚, Ñ‡Ñ‚Ð¾ Ð´Ð¾Ð»Ð¶Ð½Ð° Ð´ÐµÐ»Ð°Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ð°. Ð’Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ Ðº
Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸ÑÐ¼ Ð¿Ð¾Ð¼Ð¾Ð³Ð°ÐµÑ‚ ÑÐ²ÐµÑÑ‚Ð¸ Ðº Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼Ñƒ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹ Ð¿Ð¾ÑÐ»Ðµ Ð½Ð°Ñ‡Ð°Ð»Ð°
Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸. Ð¯Ð²Ð½Ñ‹Ðµ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¿Ð¾Ð¼Ð¾Ð³Ð°ÑŽÑ‚ Ð³Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ â€¦</p><p class="subheader">Category: <a href="https://marselester.com/category/python.html">Python</a>

    Tagged: 
    <a href="https://marselester.com/tag/python.html">python </a>
    <a href="https://marselester.com/tag/django.html">django </a>
    <a href="https://marselester.com/tag/django-todo.html">django-todo </a>
    <a href="https://marselester.com/tag/requirements.html">requirements </a>
</p>



<p><a href="https://marselester.com/django-todo-development-of-system-requirements.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="https://marselester.com/django-todo-development-of-system-requirements.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="https://marselester.com/links-to-best-practices-of-python-django.html"><h3 class="article-title">Ð¡Ð¾Ð³Ð»Ð°ÑˆÐµÐ½Ð¸Ñ Ð¿Ð¾ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ Ð½Ð° Python/Django</h3></a>
<h6 class="subheader" title="2012-06-29T00:00:00+07:00">Fri 29 June 2012
</h6>


<p>Ð’Ð¾ Ð²Ñ€ÐµÐ¼Ñ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ñ Ñ‡Ð°ÑÑ‚Ð¾ ÑÐ²ÐµÑ€ÑÑŽÑÑŒ Ñ Ð¸Ð·Ð²ÐµÑÑ‚Ð½Ñ‹Ð¼Ð¸ Ð¼Ð½Ðµ ÑÐ¾Ð³Ð»Ð°ÑˆÐµÐ½Ð¸ÑÐ¼Ð¸,
ÑÑ‚Ð°Ñ€Ð°ÑŽÑÑŒ ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÑŒ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸ÑÐ¼. Ð¦Ð¸Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¸Ñ… Ð½Ðµ Ð¸Ð¼ÐµÐµÑ‚ ÑÐ¼Ñ‹ÑÐ»Ð° -- Ð»ÑƒÑ‡ÑˆÐµ
Ð¿Ñ€Ð¸Ð²ÐµÐ´Ñƒ ÑÑÑ‹Ð»ÐºÐ¸.</p>
<p><a class="reference external" href="http://www.python.org/dev/peps/pep-0008/">PEP 8 -- Style Guide for Python Code</a>.</p>
<p><a class="reference external" href="http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#long-lines-continuations">Code Like a Pythonista: Idiomatic Python</a>.
Ð’ Ð½ÐµÐ¼ Ñ Ð½Ð°ÑˆÐµÐ» Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹ Ð½Ð° Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð´Ð»Ð¸Ð½Ð½Ñ‹Ñ… ÑÑ‚Ñ€Ð¾Ðº:</p>
<pre class="literal-block">
expended_time = (self.finish_date() - self.start_date
                 + datetime â€¦</pre><p class="subheader">Category: <a href="https://marselester.com/category/python.html">Python</a>

    Tagged: 
    <a href="https://marselester.com/tag/python.html">python </a>
    <a href="https://marselester.com/tag/django.html">django </a>
    <a href="https://marselester.com/tag/best-practices.html">best practices </a>
</p>



<p><a href="https://marselester.com/links-to-best-practices-of-python-django.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="https://marselester.com/links-to-best-practices-of-python-django.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="https://marselester.com/splitting-settings-in-django.html"><h3 class="article-title">Ð Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº Ð² Django</h3></a>
<h6 class="subheader" title="2012-06-29T00:00:00+07:00">Fri 29 June 2012
</h6>


<p>Ð’ <a class="reference external" href="https://code.djangoproject.com/wiki/SplitSettings">Django wiki</a> ÑÐ¾Ð±Ñ€Ð°Ð½Ñ‹
Ñ€Ð°Ð·Ð»Ð¸Ñ‡Ð½Ñ‹Ðµ ÑÐ¿Ð¾ÑÐ¾Ð±Ñ‹ Ñ€Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð¸Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº. ÐœÐ½Ðµ Ð½Ñ€Ð°Ð²Ð¸Ñ‚ÑÑ <a class="reference external" href="http://senko.net/en/django-quickstart-skeleton-project/">Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚</a>, Ð¾Ð¿Ð¸ÑÐ°Ð½Ð½Ñ‹Ð¹ Ð² Ð±Ð»Ð¾Ð³Ðµ
Senko RaÅ¡iÄ‡:</p>
<pre class="literal-block">
settings/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ base.py
â”œâ”€â”€ development.py
â”œâ”€â”€ local.py
â””â”€â”€ production.py
</pre>
<p><tt class="docutils literal">base.py</tt> ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ Ð¾Ð±Ñ‰Ð¸Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð´Ð»Ñ <tt class="docutils literal">development.py</tt> Ð¸
<tt class="docutils literal">production.py</tt>, Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€:</p>
<div class="highlight"><pre><span></span><span class="n">ADMINS</span> <span class="o">=</span> <span class="p">()</span>
<span class="n">MANAGERS</span> <span class="o">=</span> <span class="n">ADMINS</span>

<span class="n">TIME_ZONE</span> <span class="o">=</span> <span class="s1">&#39;Asia/Yekaterinburg&#39;</span>
<span class="c1"># ...</span>
</pre></div>
<p><tt class="docutils literal">production.py</tt> ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð´Ð»Ñ â€¦</p><p class="subheader">Category: <a href="https://marselester.com/category/python.html">Python</a>

    Tagged: 
    <a href="https://marselester.com/tag/python.html">python </a>
    <a href="https://marselester.com/tag/django.html">django </a>
    <a href="https://marselester.com/tag/settings.html">settings </a>
</p>



<p><a href="https://marselester.com/splitting-settings-in-django.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="https://marselester.com/splitting-settings-in-django.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="https://marselester.com/short-overview-of-infrastructure-for-developing-reusable-django-apps.html"><h3 class="article-title">ÐšÑ€Ð°Ñ‚ÐºÐ¸Ð¹ Ð¾Ð±Ð·Ð¾Ñ€ Ð¸Ð½Ñ„Ñ€Ð°ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñ‹ Ð´Ð»Ñ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ reusable Django Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹</h3></a>
<h6 class="subheader" title="2012-06-13T00:00:00+07:00">Wed 13 June 2012
</h6>


<p>ÐÐ°Ñ‡Ð¸Ð½Ð°Ñ Ð²Ð¿ÐµÑ€Ð²Ñ‹Ðµ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°Ñ‚ÑŒ Ð²ÐµÐ±-Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ Ð½Ð° Ð½Ð¾Ð²Ð¾Ð¼ Ñ„Ñ€ÐµÐ¹Ð¼Ð²Ð¾Ñ€ÐºÐµ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð¸ÑÑ‚
Ð·Ð°Ñ‡Ð°ÑÑ‚ÑƒÑŽ ÑÑ‚Ð°Ð»ÐºÐ¸Ð²Ð°ÐµÑ‚ÑÑ Ñ Ð½ÐµÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¼Ð¸ Ñ‚Ñ€ÑƒÐ´Ð½Ð¾ÑÑ‚ÑÐ¼Ð¸. ÐŸÑ€Ð¸ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ Ð¾Ñ‚Ñ‡ÑƒÐ¶Ð´Ð°ÐµÐ¼Ñ‹Ñ…
Ð²ÐµÐ±-Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹ Ð½Ð° Django Ðº ÑÑ‚Ð¸Ð¼ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð°Ð¼ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð¾Ñ‚Ð½ÐµÑÑ‚Ð¸ Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸ÑŽ
Ñ„Ð°Ð¹Ð»Ð¾Ð² Ð² Ð¿Ñ€Ð¾ÐµÐºÑ‚Ðµ, Ð¾Ð±Ð½Ð°Ñ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ Ñ‚ÐµÑÑ‚Ð¾Ð², Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹ Ð¿Ð°ÐºÐµÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹ Ð¸
Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ð³Ð¾ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ. Ð’ Ð´Ð°Ð½Ð½Ð¾Ð¹ ÑÑ‚Ð°Ñ‚ÑŒÐµ Ð¿Ñ€Ð¸Ð²ÐµÐ´ÐµÐ½Ñ‹ Ð¿ÑƒÑ‚Ð¸
Ñ€ÐµÑˆÐµÐ½Ð¸Ñ ÑÑ‚Ð¸Ñ… Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼.</p>
<p>Ð’Ð°Ð¶Ð½Ð¾ Ð·Ð½Ð°Ñ‚ÑŒ Ñ€Ð°Ð·Ð»Ð¸Ñ‡Ð¸Ñ Ð¼ÐµÐ¶Ð´Ñƒ Ð´Ð²ÑƒÐ¼Ñ â€¦</p><p class="subheader">Category: <a href="https://marselester.com/category/python.html">Python</a>

    Tagged: 
    <a href="https://marselester.com/tag/python.html">python </a>
    <a href="https://marselester.com/tag/django.html">django </a>
    <a href="https://marselester.com/tag/infrastructure.html">infrastructure </a>
</p>



<p><a href="https://marselester.com/short-overview-of-infrastructure-for-developing-reusable-django-apps.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="https://marselester.com/short-overview-of-infrastructure-for-developing-reusable-django-apps.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="https://marselester.com/computing-methods-of-one-dimensional-optimization.html"><h3 class="article-title">Ð’Ñ‹Ñ‡Ð¸ÑÐ»Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¼ÐµÑ‚Ð¾Ð´Ñ‹ Ð¾Ð´Ð½Ð¾Ð¼ÐµÑ€Ð½Ð¾Ð¹ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ð¸</h3></a>
<h6 class="subheader" title="2010-10-06T00:00:00+07:00">Wed 06 October 2010
</h6>


<p>ÐÐ° Ñ‚Ñ€ÐµÑ‚ÑŒÐµÐ¼ ÐºÑƒÑ€ÑÐµ Ð¿Ð¾ Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚Ñƒ Ð¼ÐµÑ‚Ð¾Ð´Ñ‹ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð´ÐµÐ»Ð°Ð»Ð¸ Ð»Ð°Ð±Ð¾Ñ€Ð°Ñ‚Ð¾Ñ€Ð½ÑƒÑŽ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ Ð½Ð°
Ñ‚ÐµÐ¼Ñƒ Â«Ð’Ñ‹Ñ‡Ð¸ÑÐ»Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¼ÐµÑ‚Ð¾Ð´Ñ‹ Ð¾Ð´Ð½Ð¾Ð¼ÐµÑ€Ð½Ð¾Ð¹ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ð¸Â».
Ð—Ð°Ð´Ð°Ñ‡Ð° Ð·Ð°ÐºÐ»ÑŽÑ‡Ð°Ð»Ð°ÑÑŒ Ð² Ð¿Ð¾Ð¸ÑÐºÐµ Ð±ÐµÐ·ÑƒÑÐ»Ð¾Ð²Ð½Ð¾Ð³Ð¾ Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼Ð° Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸
<tt class="docutils literal">f(x) = pow(x, 3) â€“ x + pow(e, <span class="pre">-x)</span></tt> Ð½Ð° Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ð¾Ð¼ Ð¸Ð½Ñ‚ÐµÑ€Ð²Ð°Ð»Ðµ <tt class="docutils literal">[0, 1]</tt>
Ñ Ñ‚Ð¾Ñ‡Ð½Ð¾ÑÑ‚ÑŒÑŽ <tt class="docutils literal">0.00001</tt>.</p>
<p>Ð’Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ð»Ð¸ÑÑŒ Ñ‡ÐµÑ€ÐµÐ·:</p>
<ul class="simple">
<li>Ð¿Ð°ÑÑÐ¸Ð²Ð½Ñ‹Ð¹ Ð¼ÐµÑ‚Ð¾Ð´;</li>
<li>Ñ€Ð°Ð²Ð½Ð¾Ð¼ÐµÑ€Ð½Ñ‹Ðµ Ð±Ð»Ð¾Ñ‡Ð½Ñ‹Ðµ Ð¼ÐµÑ‚Ð¾Ð´Ñ‹;</li>
<li>Ð¼ÐµÑ‚Ð¾Ð´ â€¦</li></ul><p class="subheader">Category: <a href="https://marselester.com/category/misc.html">Misc</a>

    Tagged: 
    <a href="https://marselester.com/tag/php.html">php </a>
    <a href="https://marselester.com/tag/mathematical-optimization.html">mathematical optimization </a>
</p>



<p><a href="https://marselester.com/computing-methods-of-one-dimensional-optimization.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="https://marselester.com/computing-methods-of-one-dimensional-optimization.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="https://marselester.com/definition-of-pressing-of-a-combination-of-keys-by-means-BIOS-on-the-assembler.html"><h3 class="article-title">ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð½Ð°Ð¶Ð°Ñ‚Ð¸Ñ ÐºÐ¾Ð¼Ð±Ð¸Ð½Ð°Ñ†Ð¸Ð¸ ÐºÐ»Ð°Ð²Ð¸Ñˆ ÑÑ€ÐµÐ´ÑÑ‚Ð²Ð°Ð¼Ð¸ BIOS Ð½Ð° Ð°ÑÑÐµÐ¼Ð±Ð»ÐµÑ€Ðµ</h3></a>
<h6 class="subheader" title="2009-12-03T00:00:00+07:00">Thu 03 December 2009
</h6>


<p>ÐŸÐ¾ ÑƒÑ‡ÐµÐ±Ðµ Ð¿Ð¾Ð½Ð°Ð´Ð¾Ð±Ð¸Ð»Ð¾ÑÑŒ Ð½Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñƒ Ð½Ð° Ð°ÑÑÐµÐ¼Ð±Ð»ÐµÑ€Ðµ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð´Ð¾Ð»Ð¶Ð½Ð°
Ñ€Ð°ÑÐ¿Ð¾Ð·Ð½Ð°Ñ‚ÑŒ Ð½Ð°Ð¶Ð°Ñ‚Ð¸Ðµ Â«Ð³Ð¾Ñ€ÑÑ‡ÐµÐ¹Â» ÐºÐ¾Ð¼Ð±Ð¸Ð½Ð°Ñ†Ð¸Ð¸ ÐºÐ»Ð°Ð²Ð¸Ñˆ <tt class="docutils literal">LeftCtrl+RightShift+F3</tt> Ð¸
Ñ€ÐµÐ°Ð³Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð½Ð° Ð½ÐµÐ³Ð¾ Ð·Ð²ÑƒÐºÐ¾Ð²Ñ‹Ð¼ ÑÐ¸Ð³Ð½Ð°Ð»Ð¾Ð¼. Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸/Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð¾Ð² Ð¿Ð¾ ÑÑ‚Ð¾Ð¹ Ñ‚ÐµÐ¼Ðµ
Ð¼Ð°Ð»Ð¾Ð²Ð°Ñ‚Ð¾, Ð¿Ð¾ ÑÑ‚Ð¾Ð¼Ñƒ Ñ€ÐµÑˆÐ¸Ð» Ð¾Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ¾Ð²Ð°Ñ‚ÑŒ ÑÐ²Ð¾ÑŽ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼ÐºÑƒ.</p>
<div class="highlight"><pre><span></span><span class="nf">masm</span><span class="w"></span>
<span class="nf">.model</span><span class="w"> </span><span class="nv">small</span><span class="w"></span>
<span class="nf">.stack</span><span class="w"> </span><span class="mi">256</span><span class="w"></span>
<span class="nf">.data</span><span class="w"></span>
<span class="w">    </span><span class="nf">Msg_about</span><span class="w"> </span><span class="nv">db</span><span class="w"> </span><span class="s">&#39;Ð Ð°ÑÐ¿Ð¾Ð·Ð½Ð°Ñ‚ÑŒ Ð½Ð°Ð¶Ð°Ñ‚Ð¸Ðµ Â«Ð³Ð¾Ñ€ÑÑ‡ÐµÐ¹Â» ÐºÐ¾Ð¼Ð±Ð¸Ð½Ð°Ñ†Ð¸Ð¸ ÐºÐ»Ð°Ð²Ð¸Ñˆ&#39;</span><span class="p">,</span><span class="w"> </span><span class="mh">0Ah</span><span class="p">,</span><span class="w"> </span><span class="mh">0Dh â€¦</span></pre></div><p class="subheader">Category: <a href="https://marselester.com/category/misc.html">Misc</a>

    Tagged: 
    <a href="https://marselester.com/tag/assembler.html">assembler </a>
</p>



<p><a href="https://marselester.com/definition-of-pressing-of-a-combination-of-keys-by-means-BIOS-on-the-assembler.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="https://marselester.com/definition-of-pressing-of-a-combination-of-keys-by-means-BIOS-on-the-assembler.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="https://marselester.com/modeling-single-channel-queue-with-refusals.html"><h3 class="article-title">ÐœÐ¾Ð´ÐµÐ»Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¾Ð´Ð½Ð¾ÐºÐ°Ð½Ð°Ð»ÑŒÐ½Ð¾Ð¹ Ð¡ÐœÐž Ñ Ð¾Ñ‚ÐºÐ°Ð·Ð°Ð¼Ð¸</h3></a>
<h6 class="subheader" title="2009-05-30T00:00:00+07:00">Sat 30 May 2009
</h6>


<p>Ð”Ð°Ð½Ð° Ð¾Ð´Ð½Ð¾ÐºÐ°Ð½Ð°Ð»ÑŒÐ½Ð°Ñ ÑÐ¸ÑÑ‚ÐµÐ¼Ð° Ð¼Ð°ÑÑÐ¾Ð²Ð¾Ð³Ð¾ Ð¾Ð±ÑÐ»ÑƒÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ Ñ Ð¾Ñ‚ÐºÐ°Ð·Ð°Ð¼Ð¸. Ð’ Ð½ÐµÐµ Ð¿Ð¾ÑÑ‚ÑƒÐ¿Ð°ÑŽÑ‚
Ð·Ð°ÑÐ²ÐºÐ¸ Ñ‡ÐµÑ€ÐµÐ· Ð¿Ñ€Ð¾Ð¼ÐµÐ¶ÑƒÑ‚Ð¾Ðº Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ <tt class="docutils literal">n</tt>, Ð³Ð´Ðµ <tt class="docutils literal">n</tt> â€“ ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ð°Ñ Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ð½Ð°,
Ð¿Ð¾Ð´Ñ‡Ð¸Ð½ÐµÐ½Ð½Ð°Ñ Ñ€Ð°Ð²Ð½Ð¾Ð¼ÐµÑ€Ð½Ð¾Ð¼Ñƒ Ð·Ð°ÐºÐ¾Ð½Ñƒ Ñ€Ð°ÑÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ñ. Ð’Ñ€ÐµÐ¼Ñ Ð¾Ð±ÑÐ»ÑƒÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ Ð·Ð°ÑÐ²ÐºÐ¸
ÑÐ¸ÑÑ‚ÐµÐ¼Ð¾Ð¹ <tt class="docutils literal">m</tt> Ñ‚Ð°ÐºÐ¶Ðµ ÑÐ²Ð»ÑÐµÑ‚ÑÑ ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ð¾Ð¹ Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ð½Ð¾Ð¹ Ñ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼ Ð·Ð°ÐºÐ¾Ð½Ð¾Ð¼
Ñ€Ð°ÑÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ñ. Ð•ÑÐ»Ð¸ Ðº Ð¼Ð¾Ð¼ÐµÐ½Ñ‚Ñƒ Ð¿Ñ€Ð¸Ñ…Ð¾Ð´Ð° Ð·Ð°ÑÐ²ÐºÐ¸ ÐºÐ°Ð½Ð°Ð» Ð·Ð°Ð½ÑÑ‚, Ð·Ð°ÑÐ²ÐºÐ° Ð¿Ð¾ÐºÐ¸Ð´Ð°ÐµÑ‚
ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ Ð½ÐµÐ¾Ð±ÑÐ»ÑƒÐ¶ÐµÐ½Ð½Ð¾Ð¹.</p>
<p>Ð˜Ð·Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ð¾ ÐºÐ¾Ð´ Ð±Ñ‹Ð» â€¦</p><p class="subheader">Category: <a href="https://marselester.com/category/misc.html">Misc</a>

    Tagged: 
    <a href="https://marselester.com/tag/python.html">python </a>
    <a href="https://marselester.com/tag/modeling.html">modeling </a>
    <a href="https://marselester.com/tag/single-channel-queue.html">single-channel queue </a>
</p>



<p><a href="https://marselester.com/modeling-single-channel-queue-with-refusals.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="https://marselester.com/modeling-single-channel-queue-with-refusals.html">Read More</a>
                <hr  class="gradient"/>
            </article>

            <!-- /#posts-list -->

    </div>
    <!-- End Main Content -->

    <!-- Sidebar -->
    <aside class="large-3 columns">
        <h5 class="sidebar-title">Site</h5>
        <ul class="side-nav">
            <li><a href="https://marselester.com/archives.html">Archives</a>
            <li><a href="https://marselester.com/tags.html">Tags</a>


                <li><a href="https://marselester.com/feeds/all.atom.xml" rel="alternate">Atom feed</a></li>
        </ul>

		
        <h5 class="sidebar-title">Categories</h5>
        <ul class="side-nav">
            <li><a href="https://marselester.com/category/go.html">Go</a></li>
            <li><a href="https://marselester.com/category/infrastructure.html">Infrastructure</a></li>
            <li><a href="https://marselester.com/category/misc.html">Misc</a></li>
            <li><a href="https://marselester.com/category/python.html">Python</a></li>
   
        </ul>

		
        <h5 class="sidebar-title">Social</h5>
        <ul class="side-nav">
            <li><a href="https://github.com/marselester">GitHub</a></li>
            <li><a href="https://www.instagram.com/marselester/">Instagram ðŸ“·</a></li>
            <li><a href="http://twitter.com/marselester">Twitter</a></li>
            <li><a href="https://medium.com/@marselester/">Medium</a></li>
        </ul>

    </aside> <!-- End Sidebar -->

</div> <!-- End Main Content and Sidebar -->


<!-- Footer -->
<footer class="row">
    <div class="large-12 columns">
        <hr />
        <div class="row">
            <div class="large-6 columns">
                <p>marselester's blog by Marsel Mavletkulov</p>
            </div>
            </div>
    </div>
</footer>